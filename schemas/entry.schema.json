{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://theoria-dataset.org/schemas/entry.schema.json",
  "title": "THEORIA dataset entry",
  "description": "Schema for a single theoretical‑physics entry in THEORIA.",
  "type": "object",
  "additionalProperties": false,

  "required": [
    "result_id",
    "result_name",
    "result_equations",
    "explanation",
    "equations_assumptions",
    "definitions",
    "derivation",
    "derivation_assumptions",
    "derivation_explanation",
    "programmatic_verification",
    "domain",
    "theory_status",
    "references",
    "created_by",
    "review_status"
  ],

  "properties": {
    "result_id": {
      "type": "string",
      "description": "Unique identifier that must match the filename (without .json extension)",
      "pattern": "^[a-z0-9_]+$"
    },

    "result_name": {
      "type": "string",
      "description": "Brief title of the result",
      "maxLength": 100
    },

    "result_equations": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "equation"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique short tag for the equation (e.g. eq1)"
          },
          "equation": {
            "type": "string",
            "description": "AsciiMath representation of the equation"
          }
        }
      }
    },

    "explanation": {
      "type": "string",
      "description": "2-5 sentence conceptual summary (≤100 words)",
      "maxLength": 800
    },

    "equations_assumptions": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "text"],
        "additionalProperties": false,
        "properties": {
          "id": { "type": "string" },
          "text": { "type": "string" }
        }
      }
    },

    "definitions": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["symbol", "definition"],
        "additionalProperties": false,
        "properties": {
          "symbol": { "type": "string" },
          "definition": { "type": "string" }
        }
      }
    },

    "derivation": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["step", "equation"],
        "additionalProperties": false,
        "properties": {
          "step": {
            "type": "integer",
            "minimum": 1
          },
          "equation": { "type": "string" }
        }
      }
    },

    "derivation_assumptions": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "text"],
        "additionalProperties": false,
        "properties": {
          "id": { "type": "string" },
          "text": { "type": "string" }
        }
      }
    },

    "derivation_explanation": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["step", "text"],
        "additionalProperties": false,
        "properties": {
          "step": {
            "type": "integer",
            "minimum": 1
          },
          "text": { "type": "string" }
        }
      }
    },

    "programmatic_verification": {
      "type": "object",
      "required": ["language", "library", "code"],
      "additionalProperties": false,
      "properties": {
        "language": {
          "type": "string",
          "pattern": "^[A-Za-z]+\\s\\d+\\.\\d+\\.\\d+$",
          "description": "e.g. 'python 3.11.12'"
        },
        "library": {
          "type": "string",
          "pattern": "^[A-Za-z0-9_]+\\s\\d+\\.\\d+\\.\\d+$",
          "description": "e.g. 'sympy 1.13.0'"
        },
        "code": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string"
          }
        }
      }
    },

    "domain": {
      "type": "string",
      "description": "arXiv category identifier",
      "pattern": "^[a-z][a-z\\-\\.]+$"
    },

    "theory_status": {
      "type": "string",
      "enum": [
        "current",
        "historical",
        "approximation",
        "limiting_case",
        "superseded"
      ],
      "description": "Current scientific status of the theory"
    },

    "validity_regime": {
      "type": "object",
      "description": "Describes where the theory applies and its limitations",
      "additionalProperties": false,
      "properties": {
        "conditions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Physical regimes where the theory is valid"
        },
        "limitations": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Where the theory breaks down or fails"
        }
      }
    },

    "superseded_by": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9_]+$"
      },
      "description": "Array of result_ids for theories that supersede or generalize this result"
    },

    "approximation_of": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "Result ID of the more general theory this approximates"
    },

    "historical_context": {
      "type": "object",
      "description": "Educational context about the theory's development and significance",
      "additionalProperties": false,
      "properties": {
        "importance": {
          "type": "string",
          "description": "Brief description of the theory's significance"
        },
        "development_period": {
          "type": "string",
          "description": "Time period when theory was developed"
        },
        "key_insights": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of major conceptual breakthroughs introduced"
        }
      }
    },

    "references": {
      "type": "array",
      "minItems": 1,
      "maxItems": 3,
      "items": {
        "type": "object",
        "required": ["id", "citation"],
        "additionalProperties": false,
        "properties": {
          "id": { "type": "string" },
          "citation": { "type": "string" }
        }
      }
    },

    "dependencies": {
      "type": "array",
      "items": { "type": "string", "pattern": "^[a-z0-9_]+$" },
      "description": "List of result_ids this result relies on"
    },

    "created_by": {
      "type": "string"
    },

    "review_status": {
      "type": "string",
      "enum": ["draft", "reviewed"]
    }
  }
}
